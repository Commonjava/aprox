<?xml version="1.0" encoding="UTF-8"?>
<infinispan>
  <global>
    <!-- <serialization marshallerClass="org.commonjava.aprox.infinispan.model.io.JsonMarshaller"/> -->
    <serialization>
      <advancedExternalizers>
        <advancedExternalizer externalizerClass="org.commonjava.aprox.infinispan.model.io.JsonStoreKeyExternalizer" id="1000"/>
        <advancedExternalizer externalizerClass="org.commonjava.aprox.infinispan.model.io.JsonRepositoryExternalizer" id="1001"/>
        <advancedExternalizer externalizerClass="org.commonjava.aprox.infinispan.model.io.JsonGroupExternalizer" id="1002"/>
        <advancedExternalizer externalizerClass="org.commonjava.aprox.infinispan.model.io.JsonDeployPointExternalizer" id="1003"/>
      </advancedExternalizers>
    </serialization>
  </global>
  <default>
    <loaders preload="true" shared="false">
      <loader class="org.infinispan.loaders.file.FileCacheStore" fetchPersistentState="true" ignoreModifications="false" purgeOnStartup="false">
        <properties>
          <property name="location" value="/var/lib/aprox/db"/>
        </properties>
      </loader>
    </loaders>
  </default>
  <namedCache name="aprox" />
  <namedCache name="shelflife">
    <indexing enabled="true" indexLocalOnly="true">
      <properties>
        <property name="hibernate.search.default.directory_provider" value="infinispan"/>
        <property name="hibernate.search.default.infinispan.configuration_resourcename" value="/etc/aprox/infinispan.xml" />
      </properties>
    </indexing>
  </namedCache>
</infinispan>
