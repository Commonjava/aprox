<?xml version="1.0" encoding="UTF-8"?>
<infinispan
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn:infinispan:config:8.2 http://www.infinispan.org/schemas/infinispan-config-8.2.xsd"
    xmlns="urn:infinispan:config:8.2">

  <cache-container default-cache="local" name="IndyCacheManager" shutdown-hook="DEFAULT">
    <local-cache-configuration name="local-template">
      <eviction size="10000000" type="COUNT"/>
    </local-cache-configuration>

    <local-cache name="local" configuration="local-template"/>

    <local-cache name="koji-maven-version-metadata" >
      <eviction size="10000000" type="COUNT"/>
    </local-cache>

    <local-cache name="folo-in-progress" >
      <eviction strategy="LRU" size="10000000" type="COUNT"/>
    </local-cache>

    <local-cache name="folo-sealed">
      <eviction size="1000" type="COUNT" strategy="LRU"/>
      <persistence passivation="false">
        <file-store shared="false" preload="false" fetch-state="true" path="/var/lib/indy/data/folo/sealed" />
      </persistence>
      <indexing index="LOCAL">
        <property name="hibernate.search.model_mapping">org.commonjava.indy.folo.data.FoloCacheProducer</property>
        <property name="hibernate.search.default.indexBase">/var/lib/indy/data/folo/sealed/index-base</property>
      </indexing>
    </local-cache>

    <local-cache name="content-index">
      <eviction strategy="LRU" size="10000000" type="COUNT"/>
    </local-cache>

    <local-cache name="indy-nfs-owner-cache" deadlock-detection-spin="10000">
      <eviction size="10000000" type="COUNT" strategy="LRU"/>
      <transaction transaction-manager-lookup="org.infinispan.transaction.lookup.DummyTransactionManagerLookup"
                   locking="PESSIMISTIC"/>
    </local-cache>
  </cache-container>
</infinispan>